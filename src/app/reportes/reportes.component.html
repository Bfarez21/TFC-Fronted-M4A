<div class="container-fluid">
  <div class="main-container">

    <!-- Encabezado -->
    <div class="page-header">
      <h1>
        <i class="fas fa-file-medical-alt"></i>
        Reporte de Atenciones por Filtros
      </h1>
      <div class="subtitle">Filtro dinámico de pacientes atendidos</div>
    </div>

    <!-- Stats Cards para Reporte de Atenciones -->
    <div class="stats-container">
      <!-- Total Atenciones -->
      <div class="stat-card">
        <div class="stat-number text-success">{{ atenciones.length }}</div>
        <div class="stat-label">
          <i class="fas fa-file-medical me-2"></i>Total de Atenciones
        </div>
      </div>

      <!-- Pacientes Únicos -->
      <div class="stat-card">
        <div class="stat-number text-primary">{{ getTotalPacientesUnicos() }}</div>
        <div class="stat-label">
          <i class="fas fa-users me-2"></i>Pacientes Únicos
        </div>
      </div>

      <!-- Género femenino -->
      <div class="stat-card">
        <div class="stat-number text-info">{{ getTotalGenero('femenino') }}</div>
        <div class="stat-label">
          <i class="fas fa-venus me-2"></i>Femenino
        </div>
      </div>
    </div>



    <!-- Filtros -->
    <div class="action-bar mb-4">
      <div class="search-container">
        <select class="select-modern" [(ngModel)]="carreraBusqueda">
          <option value="" disabled selected>Carrera</option>
          <option value="Desarrollo de Software">Desarrollo de software</option>
          <option value="Tecnología Superior en Big Data">Big Data</option>
          <option value="Ciberseguridad">Ciberseguridad</option>
          <option value="Entrenamiento Deportivo">Entrenamiento Deportivo</option>
          <option value="Tributación">Tributación</option>
        </select>

        <select class="select-modern" [(ngModel)]="profesionBusqueda">
          <option value="" disabled selected>Paciente</option>
          <option value="Estudiante">Estudiante</option>
          <option value="Profesor">Profesor</option>
        </select>

        <select class="select-modern" [(ngModel)]="generoBusqueda">
          <option value="" disabled selected>Género</option>
          <option value="masculino">Masculino</option>
          <option value="femenino">Femenino</option>
        </select>

        <input class="input-modern" type="date" [(ngModel)]="fechaBusqueda" placeholder="Fecha" />
        <input class="input-modern" type="text" [(ngModel)]="cedulaBusqueda" placeholder="Cédula" />

        <button class="btn btn-success-modern btn-modern" (click)="buscar()">
          <i class="fas fa-search me-2"></i>Buscar
        </button>
        <button class="btn btn-primary-modern btn-modern" (click)="Imprimir()">
          <i class="fas fa-print me-2"></i>Imprimir
        </button>
        <button class="btn btn-secondary-modern btn-modern" (click)="refrescar()">
          <i class="fas fa-sync me-2"></i>Ver todo
        </button>
      </div>
    </div>

    <!-- Tabla -->
    <div class="table-container">
      <div class="table-scroll">
        <table class="table table-modern table-hover">
          <thead>
            <tr>
              <th><i class="fas fa-user me-2"></i>Nombre</th>
              <th><i class="fas fa-id-card me-2"></i>Cédula</th>
              <th><i class="fas fa-stethoscope me-2"></i>Motivo</th>
              <th><i class="fas fa-birthday-cake me-2"></i>Fecha Nac.</th>
              <th><i class="fas fa-graduation-cap me-2"></i>Carrera</th>
              <th><i class="fas fa-calendar-check me-2"></i>Fecha Visita</th>
              <th><i class="fas fa-prescription me-2"></i>Receta</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let atencion of atenciones">
              <td>{{ atencion?.fichaMedica?.paciente?.nombrePac + ' ' + atencion?.fichaMedica?.paciente?.apellidoPac }}
              </td>
              <td>{{ atencion?.fichaMedica?.paciente?.cedulaPac }}</td>
              <td>{{ atencion?.motivoAte }}</td>
              <td>{{ atencion?.fichaMedica?.paciente?.fechaNacimientoPac }}</td>
              <td>{{ atencion?.fichaMedica?.paciente?.carreraPac }}</td>
              <td>{{ atencion?.fechaAtencionAte }}</td>
              <td>{{ atencion?.tratamientoAte }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Total registros -->
      <div class="text-end mt-3">
        <p><strong>Total de registros:</strong> {{ atenciones.length }}</p>
      </div>
    </div>

  </div>
</div>